# 掌控Vim：光标操作与快捷键的终极指南

<!-- 这里显示vimlogo -->

`Gmeek-html<img src="https://nliuco.github.io/1.vim.png">`

## 写在前面
> 最近在学习python, 环境用的是云端linux服务器, 跟着oeasy老师用vim编辑器, 碍于之前用git合并时,命令行总是弹出的提示输入merge信息, 默认也是vim的文本编辑器, 导致只会`:q`的我每次都不写merge info, 因为一旦进入了vim的insert模式, 我就不能通过 `ctrl` `shift` `home/end` `↑/↓/←/→` 这些按键的组合键方式移动光标了, 一旦写错, 编辑起来十分痛苦. 
>
> 每次看到有大佬用vim写代码都有一种敬畏感, 之前读过一篇 [采访Snipaste开发者](https://sspai.com/post/35097) 的文章, 其中有句话我很认同:
> >如果想要学会一个高级工具，那学习成本自然也是要的，世界上并不存在不需要学习成本但却很强大的工具。
> >强大的工具通常还有一个共性，就是一旦你掌握了它，它带给你的回报远远超过你当时付出的时间和精力成本。
>
> 当我知道了vim编辑熟练后, 甚至手腕都不需要怎么移动, 就可以完成几乎所有常见操作的时候.  更加好奇其操作方式, 故记录于此.  [!!!!!](learn once, use everywhere)


## 一、快捷键操作
### 1.1 使用键盘移动光标

<!-- 这里显示vim上下左右的图片 -->

`Gmeek-html<img src="https://nliuco.github.io/1.jhkl.png">`

在Windows中, 常用快捷键对光标快速定位的人都应该离不开 `ctrl` `shift` `home/end` `↑/↓/←/→` 这些按键/组合键.  但在vim中会发现**移动光标(左,下,上,右)**的按键分别是**`h` `j` `k` `l`**. 

有人说是因为 `Bill Joy`  在创建 `vi` 文本编辑器时, 用的机器机器是 [` ADM-3A`](http://www.aeagean.com/2019/04/13/unix/unix_why_vim_uses_hjkl_to_move_cursors/)  终端机，这台机器就是把 `h` `j` `k` `l` 键作为方向键。 ( `vim`编辑器就是后来`Bram Moolenaar`基于`vi`开发的). 对于一个没有方向键的终端, 把手从键盘拿开去够鼠标, 当然没有直接按下键盘移动更加高效. 

也有人说, `vim`编辑器出现以前, 各类键盘有所不同, 以前的键盘是不含如今多个工作区的键盘, 即: (含数字区、上下左右键区),  故含数字区、上下左右键区可能在某些情况下不生效! (如: 插入模式下, 数字区不生效! )

总之, `vim`的设计初衷可能是为了在各种终端和键盘布局下提供一致的操作体验, 掌握 **`h` `j` `k` `l`** 这些键的使用, 对于提高编辑效率和适应各种终端环境是非常重要的, 毕竟什么键盘也不太可能少了这几个键.

`Gmeek-html<img src="https://nliuco.github.io/1.jhkl.gif">`

上下左右仅仅是光标移动的开始, 下列操作都可以使用对应vim快捷键进行替换. 

|       操作       |           Vim 快捷键           | Windows 普通文本编辑器 快捷键 |
| :--------------: | :----------------------------: | :---------------------------: |
| 移动到上一个单词 |              `b`               |         `Ctrl` + `←`          |
| 移动到下一个单词 |              `w`               |         `Ctrl` + `→`          |
|    移动到行首    | `0`/`^`/`Home(插入模式亦生效)` |            `Home`             |
|    移动到行尾    | `$`/`g_`/`End(插入模式亦生效)` |             `End`             |
|  移动到文件顶部  |              `gg`              |        `Ctrl` + `Home`        |
|  移动到文件底部  |              `G`               |        `Ctrl` + `End`         |

值得注意的是光标移动到**行首尾**的快捷键有很多, `Home`/`End`和`0`/`$`效果是一样的, 不多赘述, 具体说一下`^`/`g_`和`0`/`$`的区别: 

> 将光标移到当前行`第一个`/`最后一个`**非空白字符**上:  在一行文本中，光标会移动到这一行中`行首`/`行尾`不是空格、制表符或其他空白字符的地方。
> 举个例子: 如果一行文本是     Hello, World!      , 其中文本前后都有空格(空白字符), 使用`^`/ `g_` 会将光标移动到`H`/`!`**非空白字符**上, 使用`0`/`$`会将光标移动`第一个`/`最后一个`**空格**上. 
>
> > 相比于`Home`/`End`+ `ctrl + →`/``ctrl + ←`的组合操作,  短而快的`^`/`g_`的优势就体现出来了🐶.

`Gmeek-html<img src="https://nliuco.github.io/1.^/g_&&0/$.gif">`

|          操作          |  Vim 快捷键  | Windows 普通文本编辑器 快捷键  |
| :--------------------: | :----------: | :----------------------------: |
|        向前一页        | `Ctrl` + `b` |           `Page Up`            |
|        向后一页        | `Ctrl` + `f` |          `Page Down`           |
|        向前半页        | `Ctrl` + `u` |        通常无对应快捷键        |
|        向后半页        | `Ctrl` + `d` |        通常无对应快捷键        |
|      跳转到任意行      |  `:[行号]`   | `Ctrl` + `G`（在一些编辑器中） |
|     跳转到下一段落     |     `}`      |        通常无对应快捷键        |
|     跳转到上一段落     |     `{`      |        通常无对应快捷键        |
|     跳转到文件顶部     |     `gg`     |        `Ctrl` + `Home`         |
|     跳转到文件底部     |     `G`      |         `Ctrl` + `End`         |
| 跳转到上一次编辑的位置 |     ```      |        通常无对应快捷键        |



### 1.2 高效编辑命令

以下是Vim编辑命令与常见的组合键对比：

| 操作     | 常见组合键                 | Vim快捷键 |
| -------- | -------------------------- | --------- |
| 复制单词 | `Ctrl + C`                 | `yiw`     |
| 删除单词 | `Ctrl + X`                 | `diw`     |
| 更改单词 | `Ctrl + X` 然后 `Ctrl + V` | `ciw`     |
| 复制整行 | `Shift + Ctrl + C`         | `yy`      |
| 删除整行 | `Shift + Ctrl + X`         | `dd`      |
| 复制段落 | 无法直接实现               | `yap`     |

## 二、多行编辑与块选择
### 2.1 可视块模式

如何使用可视块模式进行多行编辑：

| 操作       | 常见组合键   | Vim快捷键        |
| ---------- | ------------ | ---------------- |
| 进入块模式 | 无法直接实现 | `Ctrl+v`         |
| 块插入     | 无法直接实现 | `I` 然后插入文本 |
| 块追加     | 无法直接实现 | `A` 然后追加文本 |

### 2.2 批量替换

使用替换命令进行批量操作：

| 操作           | 常见组合键         | Vim快捷键       |
| -------------- | ------------------ | --------------- |
| 在当前行中替换 | `Ctrl + H`         | `:s/foo/bar/g`  |
| 在全文件中替换 | `Ctrl + Shift + H` | `:%s/foo/bar/g` |

## 三、特殊指令命令
### 3.1 文件操作

一些常用的文件操作命令：

| 操作     | 常见组合键 | Vim快捷键       |
| -------- | ---------- | --------------- |
| 打开文件 | `Ctrl + O` | `:e <filename>` |
| 保存文件 | `Ctrl + S` | `:w`            |
| 退出文件 | `Ctrl + Q` | `:q`            |

### 3.2 扩展命令

一些实用的扩展命令：

| 操作                     | 常见组合键         | Vim快捷键       |
| ------------------------ | ------------------ | --------------- |
| 运行外部命令并插入结果   | 无法直接实现       | `:r !<command>` |
| 运行当前文件的Python代码 | `Ctrl + Shift + R` | `:!python %`    |

## 四、提升效率的技巧
### 4.1 宏命令

使用宏命令录制和重复操作：

| 操作       | 常见组合键   | Vim快捷键     |
| ---------- | ------------ | ------------- |
| 开始录制宏 | 无法直接实现 | `q<register>` |
| 运行宏     | 无法直接实现 | `@<register>` |

### 4.2 自定义快捷键

通过配置文件自定义快捷键以提升效率：

| 操作             | 常见组合键   | Vim快捷键     |
| ---------------- | ------------ | ------------- |
| 自定义快捷键示例 | 无法直接实现 | `.vimrc` 配置 |


